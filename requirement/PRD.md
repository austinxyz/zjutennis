# 🎾 网球球员分析系统 - 产品需求文档 (PRD)

---

## 一、产品概述

本系统旨在通过全面的球员与比赛数据管理、视频分析及 AI 智能预测，为网球队教练、分析师和队员提供可视化、智能化的球员能力分析与比赛策略支持。

---

## 二、产品目标

1. **全方位球员档案管理**：整合基本信息、技能评估、比赛记录与成长轨迹。  
2. **AI 驱动的表现分析**：通过视频与数据分析，识别球员优势与改进空间。  
3. **智能胜负预测与搭配建议**：单打、双打层面智能分析与策略优化。  
4. **比赛与组队策略支持**：辅助教练进行阵容决策与战术组合优化。

---

## 三、用户角色

| 角色 | 权限与目标 |
|------|-------------|
| 球员 | 查看个人成长与技能分析，获取改进建议 |
| 教练 | 管理球员、分析比赛、制定战术与搭配 |
| 分析师 | 录入与分析比赛录像、生成AI分析报告 |
| 管理员 | 系统维护、用户与权限管理 |

---

## 四、功能模块

### 1. 球员管理（已实现）

#### 1.1 球员档案管理
- 球员基本信息（姓名、性别、联系方式、城市/国家）
- 教育背景（毕业院校、年份，支持多校）
- 新增、查看、编辑、删除球员

#### 1.2 球员搜索与筛选
- 简单搜索：按姓名快速查找
- 高级筛选：性别、UTR范围、NTRP等级、胜率、院校、城市/国家
- 分页显示（每页10人）

#### 1.3 球员仪表盘
- **技能雷达图**：可视化展示10项技能评分（正手、反手、发球、底线、截击、高压球、接发球、心理、移动、体能）
- **评级展示**：UTR、NTRP评分及外部链接
- **比赛统计**：胜率、总场次、战绩
- **优劣势分析**：绿色标注优势，橙色标注弱点

#### 1.4 技能评估
- 10项技能评分（0-5.5分制）
- 记录优势和弱点文本描述
- 自动保存技能评价历史记录

#### 1.5 统计数据
- 官方评级：UTR、NTRP、Dynamic Rating、Self Rating
- 比赛数据：总场次、胜负场、胜率、单双打胜率
- 训练频率：打球频率、每月比赛场次、每周训练时长
- 个人偏好：场地类型、打法风格、惯用手、双打位置

#### 1.6 内联编辑
- 点击编辑时，表单在右侧展开，球员列表保持可见
- 分标签编辑：基本信息、教育背景、技能、统计数据

#### 1.7 数据导入导出
- CSV导出：导出全部或选中球员数据
- CSV导入：批量导入/更新球员信息

---

### 2. 球员分析

#### 2.1 比赛与视频分析（已实现）
- **比赛管理**：创建、编辑比赛（单打/双打、时间、地点、对手、比分）
- **视频上传**：支持外部链接（YouTube、Vimeo）
- **多球员分析**：同一比赛可为每位球员创建独立分析
- **数据录入**：
  - 手动输入：击球次数、制胜分、失误、ACE、双误、跑动距离
  - SwingVision CSV 一键导入
- **AI 分析**（0-5分制）：
  - 优势评分：正手、发球、截击、移动
  - 弱点评分：反手失误、一致性、压力应对
  - 战术分析：打法风格、进攻指数、上网频率
  - AI 训练建议：改进方向和训练重点
- **可视化展示**：
  - 比赛统计卡片、优劣势评分条、战术风格标签
  - 按日期分组的视频列表
  - 多球员分析对比视图
  - 分析完成度追踪  

#### 2.2 他人评价系统
- 队友/对手可对球员进行匿名评价（技术、心理、配合）  
- 评分维度：稳定性、战术理解、协作能力、竞争心态  
- 展示整体印象趋势图（时间维度）

#### 2.3 成长轨迹分析
- 计算年龄、球龄、比赛起始年龄  
- 展示成长曲线（UTR变化、胜率变化、技能趋势）  
- 自动生成成长报告（AI 文本总结）

#### 2.4 单打 / 双打分析
- 独立维护单打与双打数据：  
  - 胜率、UTR、比赛数量、近期表现  
- 双打组合分析：
  - 常用搭档列表（搭配次数、胜率）  
  - 搭配默契度（AI 结合历史表现评分）  
  - 适合搭配建议（通过组合算法与AI推荐）  
  - 喜好对手与难缠对手分析（基于历史对阵数据）

#### 2.5 胜负预测模型
- **单打预测**：
  - 输入：两位球员基本信息、近期状态、对战历史  
  - 输出：胜率预测 + 关键影响因素解释  
- **双打预测**：
  - 输入：双方组合信息、搭配历史、对手组合数据  
  - 输出：胜率预测 + 最佳战术建议（AI生成）

---

### 3. 比赛分析（新增）

#### 3.1 比赛记录管理
- 基本信息：比赛名称、简介、时间、地点、级别  
- 队长（支持多名）、参赛队员、对手信息  
- 比赛结构：轮次 → 场次 → 球员/对手/比分/结果  
- 胜负预测结果与实际对比  
- 附件支持：比赛录像、照片、赛后总结  

#### 3.2 比赛表现总结
- 系统生成比赛整体表现总结：
  - 团队优点、待改进项、关键数据亮点  
- AI 辅助撰写总结报告  
- 对手分析与评价（团队层面）

#### 3.3 外部报道关联
- 支持附加相关新闻报道、社交媒体链接  
- 报道摘要与关键词自动提取  

#### 3.4 AI 比赛总结
- 综合球员与比赛数据，AI 输出总结报告：
  - 比赛表现分析  
  - 战术改进建议  
  - 训练方向推荐

---

### 4. 组队分析（新增）

#### 4.1 未来比赛规划
- 比赛规则录入与说明（双打场次、外援规则等）  
- 已确定队员、潜在队员、外援管理  
- 系统自动生成潜在阵容组合

#### 4.2 对手队伍分析
- 对手队伍名单与历史数据导入  
- 对手队员可能出场分析（AI 预测）

#### 4.3 阵容搭配优化
- 双打组合优化：
  - 综合兼容度、战术偏好、近期状态  
  - 输出最佳搭配建议与理由说明  
- 胜率模拟系统：
  - 模拟不同阵容对比的整体胜率  
  - 结果以表格 + 图表展示  
  - 支持“一键导出战术分析报告”

---

## 五、数据结构与模型设计（概要）

| 模块 | 主要数据字段 |
|------|---------------|
| Player | id, name, gender, age, UTR, NTRP, university[], coupleUniversity[], skills[], ratingHistory[], matchHistory[], videoRefs[] |
| Match | id, name, date, round[], players[], opponents[], results[], videoRefs[], summary |
| VideoAnalysis | matchId, highlights[], AIReport, improvementAreas[], performanceMetrics[] |
| Pairing | playerA, playerB, matches[], winRate, chemistryScore, lastPlayed, AIRecommendation |
| Prediction | type (single/double), inputs[], modelUsed, predictedWinRate, keyFactors[] |

---

## 六、AI 模型与逻辑设计

| 模型 | 功能 | 数据输入 | 输出 |
|------|------|-----------|------|
| Video Analyzer | 关键帧识别 + 技术动作分类 | 视频 + 球员历史数据 | 优势/弱点分析报告 |
| Chemistry Model | 双打配合分析 | 历史搭档数据 | 搭配默契度评分 |
| Match Predictor | 胜负预测 | 球员特征 + 历史对战 | 胜率概率与解释 |
| Improvement Recommender | 训练方向推荐 | 技术动作分析 + 比赛总结 | 训练建议 |

---

## 七、系统架构建议

- **前端**：React / Next.js + Chart.js / Recharts + Video.js  
- **后端**：Python (FastAPI / Flask) + PostgreSQL + Redis  
- **AI 模块**：独立微服务（Python + PyTorch / TensorFlow）  
- **云存储**：视频文件存储于 AWS S3 / Google Cloud Storage  
- **分析引擎**：可选用 OpenAI API 或自训练模型实现文本与战术总结  

---

## 八、未来扩展方向

1. **实时数据采集**（通过智能手环/传感器）  
2. **AI 自动剪辑比赛精彩片段**  
3. **教练策略模拟系统**（虚拟阵容对战）  
4. **移动端应用开发（iOS / Android）**

---

## 九、文档修订历史

| 版本 | 日期 | 作者 | 更新内容 |
|------|------|------|----------|
| v1.0 | 2025-10-25 | Austin Xu | 初版草案，整合球员分析与比赛预测功能 |
| v1.1 | 2025-10-27 | Austin Xu | 更新实现状态：功能模块1（球员管理）和2.1（比赛与视频分析）已实现 |

---